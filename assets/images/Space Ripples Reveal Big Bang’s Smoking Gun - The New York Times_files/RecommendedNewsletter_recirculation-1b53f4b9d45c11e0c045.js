(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{IHZh:function(e,t,n){"use strict";n("sMBO");var i=n("pVnL"),r=n.n(i),a=n("QILm"),o=n.n(a),s=n("q1tI"),l=n.n(s),c=(n("17x9"),n("2mql")),u=n.n(c),d=n("hHXl"),p=n("SpBF");t.a=function(e){var t=function(t){var n=t.client,i=o()(t,["client"]),a=Object(p.a)(n);return l.a.createElement(e,r()({},i,a))},n=e.displayName||e.name||"Component";return t.displayName="WithNewsletters(".concat(n,")"),u()(t,e),Object(d.withApollo)(t)}},SpBF:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("QWBl"),n("J30X"),n("brp2"),n("DQNa"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var i=n("lSNA"),r=n.n(i),a=n("J4zp"),o=n.n(a),s=n("VkAN"),l=n.n(s),c=n("q1tI"),u=n("Dugd"),d=n.n(u),p=n("06b3");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(){var e=l()(["\n  query UseNewslettersQuery($id: UserIdentifier!) {\n    user(identifier: $id) {\n      newsletterSubscriptions {\n        newsletterCodes\n      }\n    }\n  }\n"]);return b=function(){return e},e}function g(){var e=l()(["\n  mutation subToNewsletters($input: CreateNoCaptchaNewsletterSubscriptionInput!) {\n    createNoCaptchaNewsletterSubscription(input: $input) {\n      message\n    }\n  }\n"]);return g=function(){return e},e}var h=d()(g()),w=d()(b());t.a=function(e){var t=Object(c.useState)(null),n=o()(t,2),i=n[0],r=n[1],a=Object(c.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=m(m({},n),{},{newsletterCodes:t,updateDate:Math.floor(Date.now()/1e3)});return e.mutate({mutation:h,variables:{input:i}})}),[e]);return Object(c.useEffect)((function(){var t=!1;return e.query({query:w,variables:{id:{token:p.a.load("NYT-S")||""}}}).then((function(e){var n,i=e.data,a=i.error,o=i.loading,s=i.user,l=null==s||null===(n=s.newsletterSubscriptions)||void 0===n?void 0:n.newsletterCodes;t||o||(!a&&Array.isArray(l)||(l=[]),r(l))})).catch((function(){r([])})),function(){t=!0}}),[e]),{newsletterSubs:i,subToNewsletters:a}}},cyDi:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=(n("q1tI"),n("17x9"),n("Jqp9")),l=n("wXC7"),c=n.n(l),u=n("3Rk2"),d=n.n(u)()(["@media (min-width: 411px)","@media (min-width: 1024px)","@media (min-width: 1680px)"]),p=Object(s.css)(d({width:["30px","30px","35px"],height:["30px","30px","35px"]}),";"),f=Object(s.css)("transition:all 500ms ease;@media (prefers-reduced-motion:reduce){transition:none;}"),m=Object(s.css)("transform-origin:30% 50%;transform:rotate(40deg) scaleX(0.65);"),b=Object(s.css)("transform-origin:53% 60%;transform:rotate(40deg);"),g=Object(s.css)("&:hover > circle{fill:",c.a.color.gray20,";stroke:",c.a.color.gray20,";}"),h=Object(s.css)("&:hover > line,&:hover > circle{stroke:",c.a.color.gray20,";}"),w=function(e){var t,n,i=e.selected,a=e.size,l=e.color,u=e.upperRight,d=e.className;n=i?l:u?c.a.color.white:"transparent";var w=i?c.a.color.white:l;return r()("svg",{preserveAspectRatio:"xMinYMin meet",height:a,width:a,viewBox:"0 0 37 37","data-testid":"circular-plus-button-selected",className:Object(s.cx)(d,(t={},o()(t,g,i),o()(t,h,!i),o()(t,p,u),t))},void 0,r()("circle",{className:f,cx:18,cy:18,r:17,stroke:l,fill:n,strokeWidth:"1.5"}),r()("line",{className:Object(s.cx)(f,o()({},m,i)),x1:11,y1:18,x2:25,y2:18,strokeWidth:i?3.5:2,stroke:w}),r()("line",{className:Object(s.cx)(f,o()({},b,i)),x1:18,y1:11,x2:18,y2:25,strokeWidth:i?3.5:2,stroke:w}))};w.displayName="CircularPlusButton",w.defaultProps={size:37,color:"black",className:void 0,upperRight:!0};t.a=w},osUD:function(e,t,n){"use strict";n.d(t,"b",(function(){return qe}));n("ma9I"),n("DQNa"),n("07d7"),n("SuFq"),n("JfAA");var i=n("gcR/"),r=n.n(i),a=n("lwsE"),o=n.n(a),s=n("W8MJ"),l=n.n(s),c=n("7W2i"),u=n.n(c),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),m=n.n(f),b=n("VkAN"),g=n.n(b),h=n("q1tI"),w=n.n(h),y=n("hHXl"),v=n("Dugd"),x=n.n(v),O=n("X6oL"),j=n.n(O),k=(n("17x9"),n("ZKN5")),N=n("oYIW"),z=n("bQ5B"),S=n("IHZh"),C=n("OO03"),D=n("/+rA"),B=n("HUmG"),P=n("5pww"),R=(n("2B1R"),n("Jqp9")),q=(n("pNMO"),n("4Brf"),n("sMBO"),n("lSNA")),I=n.n(q),U=n("J4zp"),A=n.n(U),E=n("cyDi"),L=n("wXC7"),M=n.n(L),Q=n("aqT/"),T=n.n(Q),W=n("MlQP"),$=n.n(W),H=function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};e.trackEvent({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{context:"nwsltr",region:"footer",name:"newsletter",algos:a,element:{name:r}},block:{index:t,label:n},newsletter:{product:i,name:n}})},J=function(e){e.trackEvent({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{context:"nwsltr",region:"footer",name:"newsletter",element:{name:"hide"}}})},V=(n("zHFu"),n("yWo2"),M.a.breakpoint),X=M.a.color,F=M.a.font,Y=Object(R.css)("box-sizing:border-box;display:flex;background-color:",X.white,";border:1px solid ",X.gray60,";padding:15px;width:100%;position:relative;margin:0 0 12px;text-align:left;flex-direction:column;transition:box-shadow 0.3s ease;",V.large,"{margin:0 11px 32px;height:100%;min-height:342px;@supports (display:grid){margin:0;min-height:auto;}}@supports (display:grid){margin:0;}"),Z=Object(R.css)(V.small,"{&:hover{box-shadow:0 4px 6px rgba(196,196,196,0.5);}}@media (min-width:768px){&:hover{circle{fill:",X.gray10," !important;stroke:",X.gray10," !important;}line{stroke:",X.white," !important;}}}"),K=Object(R.css)("&:hover{circle{fill:",X.gray40," !important;stroke:",X.gray40," !important;}line{stroke:",X.white," !important;}}"),_=Object(R.css)("display:flex;flex-direction:row;",V.large,"{flex-direction:column;flex-grow:2;}"),G=Object(R.css)("display:none;"),ee=Object(R.css)("background-color:",X.white,";position:absolute;right:15px;top:15px;"),te=Object(R.css)("height:82px;width:82px;margin-bottom:0;margin-right:15.5px;flex-shrink:0;img{width:100%;}",V.large,"{margin-bottom:11px;margin-right:0;}"),ne=Object(R.css)("align-items:flex-start;",V.small,"{width:calc(100% - 150px);}",V.large,"{width:100%;display:flex;flex-direction:column;justify-content:space-between;flex-grow:2;}@media (max-width:",V.large,"px){width:100%;}"),ie=Object(R.css)("font-family:",F.franklinBase,";font-size:",F.size(11),";line-height:",F.size(16),";font-weight:",F.weight.medium,";letter-spacing:0.09em;text-transform:uppercase;color:",X.gray20,";width:calc(100% - 35px);",V.small,"{width:100%;}"),re=Object(R.css)("font-family:",F.franklinBase,";font-weight:",F.weight.bold,";font-size:",F.size(16),";line-height:",F.size(20),";color:",X.gray10,";margin-bottom:4px;width:calc(100% - 35px);",V.small,"{margin-bottom:6px;font-size:",F.size(18),";width:100%;}"),ae=Object(R.css)("font-family:",F.franklinBase,";font-size:",F.size(15),";line-height:",F.size(18),";letter-spacing:0.2px;color:",X.gray20,";display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;overflow:hidden;margin-bottom:10px;",V.small,"{font-size:",F.size(16),";line-height:",F.size(20),";}@media (max-width:",V.large,"px){width:100%;}"),oe=Object(R.css)("position:absolute;top:0;left:0;width:100%;height:100%;margin-top:0;opacity:0;"),se=Object(R.css)("position:relative;align-self:flex-start;margin-left:98px;color:",X.blue20,";font-family:",F.franklinBase,";font-size:",F.size(14),";font-style:normal;font-weight:",F.weight.bold,";line-height:",F.size(18),";letter-spacing:0.2px;&:hover{text-decoration:underline;}",V.large,"{margin-left:0;}"),le=function(e){var t,n=e.index,i=e.tracking,a=e.newsletter,o=a.code,s=a.description,l=a.frequency,c=a.name,u=a.thumb,d=a.params,p="https://static.nytimes.com/email-content/".concat(o,"_sample.html"),f=Object(h.useState)(!1),m=A()(f,2),b=m[0],g=m[1],y=Object(h.useState)(!1),v=A()(y,2),x=v[0],O=v[1],j=Object(h.useState)(!1),k=A()(j,2),N=k[0],z=k[1],S=Object(h.useRef)(null),C=Object(h.useRef)(null);Object(h.useEffect)((function(){b&&function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.trackEvent({event:"impression",eventData:{type:"impression"},module:{context:"nwsltr",region:"footer",name:"newsletter",algos:r},block:{index:t,label:n},newsletter:{product:i,name:n}})}(i,n,c,o,d)}),[i,b,n,c,o,d]);var D=Object(h.useCallback)((function(){H(i,n,c,o,"subscribe",d),O(!0),window.scrollTo(0,S.current.offsetTop-window.innerHeight/4),(null==C?void 0:C.current)&&C.current.focus()}),[i,n,c,o,d]);return r()(T.a,{onChange:function(e){return function(e){e&&g(!0)}(e)},active:!b},void 0,w.a.createElement("section",{className:Object(R.cx)(Y,(t={},I()(t,Z,!x),I()(t,K,x),t)),"aria-labelledby":x?"thank-you-sign-up":"".concat(o,"-newsletter-name"),"aria-describedby":x?"thank-you-sign-up":"".concat(o,"-newsletter-description ").concat(o,"-newsletter-frequency"),ref:S},r()("div",{className:_},void 0,u&&r()("div",{className:te},void 0,r()("img",{alt:"".concat(c," newsletter"),src:u})),r()("div",{className:ne},void 0,r()("div",{},void 0,l&&r()("p",{id:"".concat(o,"-newsletter-frequency"),className:ie},void 0,l),r()("h3",{id:"".concat(o,"-newsletter-name"),className:re},void 0,c),!x&&s&&r()("p",{id:"".concat(o,"-newsletter-description"),className:ae},void 0,s),x&&w.a.createElement("h3",{id:"thank-you-sign-up",tabIndex:"-1",ref:C,className:ae},"Thank you for signing up. You will recieve a confirmation email shortly."))),r()("div",{className:ee},void 0,r()(E.a,{selected:N,size:40,color:x?M.a.color.gray40:M.a.color.gray10}))),r()($.a,{productCode:o,buttonClassName:oe,loadingSpinnerClassName:G,showConfirmationMessage:!1,onSuccess:function(){return D(o)},onClick:function(){return z(!0),void H(i,n,c,o,"card select",d)},type:"modal",disableUserQuery:!0,disableBaseTracking:!0},o),!x&&o&&r()("a",{rel:"noopener noreferrer",target:"_blank",href:p,className:se},void 0,"See the latest")))};le.displayName="NewsletterCard",le.defaultProps={newsletter:{},index:void 0};var ce=j()()(le),ue=n("7Ojn"),de=n("ES1Y"),pe=n("3Rk2"),fe=n.n(pe),me=M.a.breakpoint,be=M.a.color,ge=M.a.font,he=fe()([me.medium,me.large]),we=Object(R.css)("box-sizing:border-box;margin:0 20px 10px;border-top:2px solid ",be.black,";margin-bottom:",ge.size(32),";",me.medium,"{border-top:1px solid ",be.black,";margin-left:0;margin-right:0;}"),ye=Object(R.css)("display:flex;justify-content:space-between;padding:10px 0 20px;",me.medium,"{padding:17px 0;}"),ve=Object(R.css)("font-family:",ge.franklinBase,";font-weight:",ge.weight.bold,";font-size:",ge.size(17),";line-height:",ge.size(21),";",me.small,"{font-size:",ge.size(16),";line-height:",ge.size(22),";}"),xe=Object(R.css)("font-family:",ge.franklinBase,";font-weight:",ge.weight.medium,";font-size:",ge.size(14),";line-height:",ge.size(17),";color:",be.gray30,";background:",be.white,";cursor:pointer;"),Oe=Object(R.css)("display:block;text-align:center;margin:16px auto 0;",me.large,"{display:none;}"),je=Object(R.css)("display:none;",me.large,"{display:block;}"),ke=Object(R.css)("display:flex;flex-wrap:wrap;@supports (display:grid){display:grid;justify-content:center;",he({gridTemplateColumns:["repeat(1, 100%)","repeat(1, 100%)","repeat(3, 1fr)"]}),";grid-column-gap:16px;grid-row-gap:16px;}"),Ne=r()("h2",{className:ve,id:"newsletter-section-header"},void 0,"Suggested newsletters for you"),ze=function(e){var t=e.abVariant,n=e.geolocation,i=e.newsletterSubs,a=e.recommendedList,o=e.handleDontShowClick,s=Object(h.useMemo)((function(){return Object(ue.a)({abVariant:t,geolocation:n,newsletterSubs:i,recommendedList:a})}),[t,n,i,a]);return s.length!==de.c?null:r()("section",{className:we,"aria-labelledby":"newsletter-section-header"},void 0,r()("div",{className:ye},void 0,Ne,r()("button",{type:"button",className:Object(R.cx)(xe,je),onKeyPress:function(){return o()},onClick:function(){return o()},"aria-label":"Dont show me this again"},void 0,"Don't show me this again")),r()("div",{className:ke},void 0,s.map((function(e,t){return r()("article",{},t.toString(),r()(ce,{index:t,newsletter:e},e.code))}))),r()("button",{type:"button",className:Object(R.cx)(xe,Oe),onKeyPress:function(){return o()},onClick:function(){return o()},"aria-label":"Dont show me this again"},void 0,"Don't show me this again"))};ze.displayName="NewslettersContainer",ze.defaultProps={abVariant:void 0,newsletterSubs:[],geolocation:void 0,recommendedList:{},handleDontShowClick:null};var Se,Ce,De,Be=j()()(ze);function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}function Re(){var e=g()(["\n  query newsletterRecommendationsQuery(\n    $assetUri: String!\n    $listUri: PersonalizedListUri!\n    $first: Int\n  ) {\n    lists {\n      personalizedList(\n        listUri: $listUri\n        first: $first\n        personalizedListContext: { assetUri: $assetUri }\n      ) {\n        edges {\n          node {\n            ... on HelixNewsletterProduct {\n              id\n              uri\n              name\n              type\n              sourceApplication\n            }\n          }\n          trackingParams {\n            key\n            value\n          }\n        }\n      }\n    }\n  }\n"]);return Re=function(){return e},e}var qe=x()(Re()),Ie=(Se=Object(y.graphql)(qe,{options:function(e){return{name:"newsletterRecommendationsData",variables:{assetUri:e.articleUri||"",first:10,listUri:"nyt://per/personalized-list/story-newsletter-rec"},ssr:!1,fetchPolicy:"cache-first",partialRefetch:!0}}}),Ce=j()(),Object(k.a)(De=Se(De=Ce(De=Object(N.a)(De=Object(C.a)(De=Object(S.a)(De=Object(z.a)(De=Object(D.b)(De=function(e){u()(n,e);var t=Pe(n);function n(){var e;o()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={hideNewsletterBuffet:!1},e.handleDontShowClick=function(){J(e.props.tracking),P.a.setItem(de.b,!0),e.setState({hideNewsletterBuffet:!0})},e}return l()(n,[{key:"render",value:function(){var e,t,n=this.props,i=n.geolocation,a=n.newsletterSubs,o=n.abra,s=n.variant,l=n.user,c=n.data,u=n.storyline,d=this.state.hideNewsletterBuffet,p=c.loading,f=c.lists,m=s||(null===(e=o[de.e])||void 0===e?void 0:e.variant)||"",b=Object(ue.e)(m),g=Object(ue.f)(m),h=s||(null===(t=o[de.f])||void 0===t?void 0:t.variant)||"",w=Object(ue.e)(h),y=Object(ue.f)(h),v=Object(ue.d)(u);if(d||p&&!f||Object(B.f)(l)||v&&!b&&!g||!v&&!w&&!y)return null;var x=v?m:h;return r()(Be,{abVariant:x,geolocation:i,newsletterSubs:a,recommendedList:f,handleDontShowClick:this.handleDontShowClick})}}]),n}(h.Component))||De)||De)||De)||De)||De)||De)||De)||De);Ie.displayName="NewslettersBuffet",Ie.defaultProps={abra:{},variant:"",data:{loading:null,article:null},geolocation:void 0,newsletterSubs:null,user:void 0,storyline:void 0},Ie.displayName="NewslettersBuffet";t.a=Ie}}]);
//# sourceMappingURL=RecommendedNewsletter~recirculation-1b53f4b9d45c11e0c045.js.map